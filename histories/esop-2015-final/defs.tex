%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Compiling two paper versions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newcommand{\ifext}[2]{\ifdefined\extflag{#1}\else{#2}\fi}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newcommand{\an}[1]{{\color{red}({Aleks:\ #1})}\marginpar{$\checkmark$}}
\newcommand{\is}[1]{{\color{blue}({Ilya:\ #1})}\marginpar{$\checkmark$}}
\newcommand{\ab}[1]{{\color{violet}({AB:\ #1})}\marginpar{$\checkmark$}}

%mapsto stuff
\makeatletter
\newcommand{\oset}[3][0ex]{%
  \mathrel{\mathop{#3}\limits^{
    \vbox to#1{\kern-1\ex@
    \hbox{$\scriptstyle#2$}\vss}}}}
\makeatother

\makeatletter
\newcommand{\ojset}[3][0ex]{%
  \mathrel{\mathop{#3}\limits^{
    \vbox to#1{\kern-3\ex@
    \hbox{$\scriptstyle#2$}\vss}}}}
\makeatother


\newcommand{\jpts}{\mathrel{\ojset{j}{\mapsto}}}
\newcommand{\spts}{\mathrel{\oset{s}{\mapsto}}}
\newcommand{\opts}{\mathrel{\oset{o}{\mapsto}}}

%\newcommand{\opts}{\hookrightarrow}
\newcommand{\lsep}{\ast}
\newcommand{\lk}{\mathit{lk}}
\newcommand{\angled}[1]{\langle {#1} \rangle}
\newcommand{\fresh}[1]{\langle\!\langle {#1} \rangle\!\rangle}
\newcommand{\ffresh}[2]{\fresh{#1}^{#2}}
\newcommand{\tfr}[1]{t^{#1}_{\text{fresh}}}
\newcommand{\ssep}{\circledast}
%\newcommand{\hpts}{\shortrightarrow}
\newcommand{\hpts}{\mapsto}
\newcommand{\dotcup}{\ensuremath{\mathaccent\cdot\cup}}
\newcommand{\Dotcup}[1]{\ensuremath{\mathaccent\cdot{\bigcup}}_{#1}} 
\newcommand{\hunion}{\mathbin{\dotcup}}
\newcommand{\Hunion}[1]{\mathbin{\Dotcup{#1}}}
\newcommand{\wand}{\mathop{-\!\!\!\!-\!\!\!\ast}}
\newcommand{\priv}{\mathsf{pv}}
\newcommand{\pfun}{\rightharpoonup}
\newcommand{\hpriv}{\mathsf{pv}}
\newcommand{\hfc}{\mathsf{fc}}
%\newcommand{\hps}{\mathsf{l}}
\newcommand{\hps}{\ell}
\newcommand{\hal}{\mathsf{al}}
\newcommand{\Eqm}{=_{\!/_{\!\text{\emph{mset}}}}}
\newcommand{\eqm}{=_{\!/_{\!\text{{mset}}}}}
\newcommand{\htb}{\mathsf{tb}}
\newcommand{\sent}{\mathit{snt}}
\newcommand{\hlock}{\mathsf{lk}}
\newcommand{\tlock}{\mathsf{tl}}
\newcommand{\taupop}{{\mathit{pop}}}
\newcommand{\alphapush}{{\mathit{push}}}
\newcommand{\own}{\mathit{own}}
\newcommand{\nxt}{\mathit{nxt}}
\newcommand{\nat}{\mathsf{nat}}
\newcommand{\ap}{\text{\emph{a}}_p}
\newcommand{\AAArray}{\mathsf{Arr}}
\newcommand{\Array}[4]{\AAArray_{#2}(#1, #3, #4)}
\newcommand{\AArray}[3]{\AAArray_{#2}(#1, #3)}
\newcommand{\Pushed}[2]{\mathsf{Pushed}(#1, #2)}
\newcommand{\Popped}[2]{\mathsf{Popped}(#1, #2)}
\newcommand{\push}{\text{push}}
\newcommand{\pop}{\text{pop}}
\newcommand{\NoReqs}{\mathsf{NoReq}}
\newcommand{\noreqs}[1]{\NoReqs(#1)}
\newcommand{\Requested}{\mathsf{HasReq}}
\newcommand{\requested}[1]{\Requested(#1)}
\newcommand{\Locked}{\mathsf{Locked}}
\newcommand{\locked}[1]{\Locked(#1)}
\newcommand{\Ack}{\mathsf{Ack}}
\newcommand{\ack}[1]{\Ack(#1)}
\newcommand{\LHR}{\mathsf{LHR}}
\newcommand{\lhr}[1]{\LHR(#1)}

\newcommand{\reqtrans}{\text{\emph{req}}}
\newcommand{\helptrans}{\text{\emph{help}}}
\newcommand{\colltrans}{\text{\emph{coll}}}


\newcommand{\Prod}{\mathsf{Pr}}
\newcommand{\Cons}{\mathsf{Cn}}
\newcommand{\hlabel}{\ell}
\newcommand{\llist}{\mathsf{list}}
\newcommand{\ls}{\mathit{ls}}
\newcommand{\complete}{\mathsf{complete}}
\newcommand{\cont}{\mathsf{stacklike}}
\newcommand{\garb}{\mathit{grb}}
\newcommand{\relentangle}{\bowtie}
\newcommand{\entangle}{\rtimes}
\newcommand{\rentangle}{\ltimes}
\newcommand{\Null}{\text{\texttt{null}}}
\newcommand{\apart}{\opentimes}
\newcommand{\TL}{T_{\{\tlock,\own,\nxt,I\}}}
\newcommand{\pair}[2]{\langle #1; #2 \rangle}
\newcommand{\triple}[3]{\langle #1; #2; #3 \rangle}
\newcommand{\RS}{\mathsf{RS}}
\newcommand{\rhos}{\ol{\rho}}
\renewcommand{\phi}{\varphi} 

% a bit of a hack to get black bowties
\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
}{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}
\DeclareMathSymbol{\blacktriangleleft} {2}{mathb}{"9E}% name to be checked
\DeclareMathSymbol{\blacktriangleright}{2}{mathb}{"9F}% name to be checked
\newcommand{\opentangle}{\mathbin{\blacktriangleright\!\blacktriangleleft}}
%\newcommand{\SCTS}{SCTS\xspace}

\newcommand{\self}{\emph{self}\xspace}
\newcommand{\other}{\emph{other}\xspace}
\newcommand{\joint}{\emph{joint}\xspace}

\newcommand{\mathself}{\!\mathop{s}}
\newcommand{\mathother}{\!\mathop{o}}
\newcommand{\mathjoint}{\!\mathop{j}}
\newcommand{\zip}{\circ}
\newcommand{\unit}{\mathsf{id}}
\newcommand{\id}{\mathsf{id}}
\newcommand{\finmap}{\rightharpoonup_{\textrm{fin}}}
\newcommand{\hempty}{\mathsf{empty}}
\newcommand{\CSL}{\textit{CSL}}
\newcommand{\Histso}{\hookrightarrow}
\newcommand{\histso}[2]{{#1} \Histso ({#2})}

\newcommand{\disj}{{\mathop\bot}}

%% judgments
\newcommand{\oftp}{\mathord{:}}
\newcommand{\hastp}{\mathrel{:}}
\newcommand{\ldot}{\mathord{.}\,}

% meaning function
\newcommand{\dlb}{\lbrack\!\lbrack}
\newcommand{\ldb}{\dlb}
\newcommand{\drb}{\rbrack\!\rbrack}
\newcommand{\rdb}{\drb}
\newcommand{\mean}[1]{\mathop{\dlb #1\drb}\nolimits}
\newcommand{\FV}{\textsf{FV}}
\newcommand{\FTV}{\textsf{FTV}}

% syntactic substitution of #1 for #2 in #3
\newcommand{\subst}[2]{[#1/#2]}
\newcommand{\mapto}[2]{#1 \to #2}
\newcommand{\evalsto}{\hookrightarrow}

% context-free grammars
\newcommand{\Or}{\mathrel{\mid}}
\newcommand{\bnfdef}{\GoesTo}
\newcommand{\bnfalt}{\Or}
\newcommand{\bnfas}{::=}

\newcommand{\scomp}{\circ}

%% operators
\newcommand{\aand}{\wedge}
\newcommand{\oor}{\vee}
\newcommand{\nnot}{\neg}
\newcommand{\eqq}{\mathrel{\mbox{\tt==}}}
\newcommand{\neqq}{\mathrel{\mbox{\tt!=}}}
\newcommand{\andb}{\mathrel{\small\mbox{\&\&}}}
\newcommand{\orb}{\mathrel{\mbox{\tt{|\!|}}}}
\newcommand{\eqdef}{\mathrel{\:\widehat{=}\:}}
\newcommand{\evar}[1]{?#1}
\newcommand{\zig}{\triangleleft}
\newcommand{\zag}{\triangleright}

\newcommand{\acon}{\mathcal{A}}
\newcommand{\econ}{\mathcal{E}}
\newcommand{\ucon}{\mathcal{U}}
\newcommand{\vcon}{\mathcal{V}}
\newcommand{\wcon}{\mathcal{W}}
\newcommand{\privcon}{\mathcal{P}}
\newcommand{\pscon}{\mathcal{S}}
\newcommand{\tbcon}{\mathcal{T}}
\newcommand{\fccon}{\mathcal{F}}
\newcommand{\lcon}{\mathcal{L}}
\newcommand{\alloccon}{\mathcal{A}}

%% types
\newcommand{\arrow}{\rightarrow}
\newcommand{\darrow}{\Rightarrow}
\newcommand{\carrow}{\arrow_{\mathsf{c}}}
\newcommand{\larrow}{\rightharpoonup_{\mathsf{L}}}
\newcommand{\ST}[4]{\specK{{\{\!{|}}#1{{|}\!\}}} #2
\specK{{\{\!{|}}#3{{|}\!\}}} @ {#4}}

%% language commands
\newcommand{\ite}[3]{\mathsf{if}\ #1\ \mathsf{then}\ #2\ \mathsf{else}\ #3}
\newcommand{\cmd}[1]{\text{\texttt{#1}}\xspace}
\newcommand{\Cmd}[2]{\text{\texttt{{#1}(}}{#2}\text{\texttt{)}}\xspace}
\newcommand{\indom}{\ \backslash mathsf{in dom}}
\newcommand{\untag}{\mathsf{untag}}
\newcommand{\foundtag}{\mathsf{found\_tag}}
\newcommand{\righttag}{\mathsf{right\_tag}}
\newcommand{\lefttag}{\mathsf{left\_tag}}
\newcommand{\heapof}{\mathsf{heap\_of}}
\newcommand{\ptrfound}{\mathsf{ptr\_found}}
\newcommand{\searchleft}{\mathsf{search\_left}}
\newcommand{\searchright}{\mathsf{search\_right}}
\newcommand{\sstar}{\circledast}
\newcommand{\pts}{\mapsto}
\newcommand{\ptsfrac}[1]{\stackrel{#1}{\mapsto}}
\newcommand{\ptshalf}{\mapstochar\rightharpoonup}%{\leadsto}%{\sfrac{1}{2}}%\xmapstohalf{}%\nicefrac{1}{2}%\ptsfrac{\text{\tiny $\nicefrac{1}{2}$}}
\newcommand{\emp}{\mathsf{emp}}
\newcommand{\nil}{\mathsf{nil}}
\newcommand{\union}{\bullet}
\newcommand{\find}{\mathsf{find}}
\newcommand{\type}[1]{\textsf{#1}}
\newcommand{\heap}{\type{heap}}
\newcommand{\ptr}{\type{ptr}}
\newcommand{\resVar}{\mathsf{res}}
\newcommand{\ty}{糊
\newcommand{\tyname}[1]{\mathsf{#1}}
\newcommand{\valname}[1]{\mathsf{#1}}
\newcommand{\labname}[1]{\mathsf{#1}}
\newcommand{\dontcare}{-}
\newcommand{\size}[1]{|１ゥ徙糸镱茴鬻泔眄犷潲茚泗射戾茼狒梵纣殇戾茴鬻泔眄犷潲茚泗领祜泯郾蓰茼狒梵纣犰祜泯１茴鬻泔眄犷潲茚泗腻犰祜泯郾蓰茼狒梵纣溴犰祜泯１茴鬻泔眄犷潲茚泗义徜郾蓰茼狒梵纣蝈徜１茴鬻泔眄犷潲茚泗昨轸妪鄄蓰茼狒梵纣黩轸妪１２茴鬻泔眄犷潲茚泗冕簖鄢蓰茼狒梵纣汜簖１２３ゥ盹蝈徙糸镱ボ铄縻镯磲钿芰泗郾蓰荇屮趔纣１茴鬻泔眄犷潲茚泗郾蓰荇屮趔纣荏泸轲趔辁妍１茴鬻泔眄犷潲茚徙酏郾蓰荇屮趔纣荏磲祆１茴鬻泔眄犷潲茴蹴郾蓰塄荇屮酐荏泸轲趔辁妍１堠茴鬻泔眄犷潲芪蹴郾蓰荇屮酐荏泸轲趔辁妍１茴鬻泔眄犷潲苠筱郾蓰荇屮酐荇屮趑酐荏泸轲趔辁妍１茴鬻泔眄犷潲苠弩泯郾蓰荇屮酐荇屮趑酐荏磲祆１茴鬻泔眄犷潲苷铋酏塄荇屮酐荇屮趔纣疹轸堠ゥ趄邋茴鬻泔眄犷潲荇蚰蹴睐茆雉茴鬻泔眄犷潲荇蛞弭郾蓰茼狒梵纣蝈酏１茴鬻泔眄犷潲荇蛎镱簖鄄蓰茼狒梵纣泔铙１２茴鬻泔眄犷潲荇蛐狎鄢蓰茼狒梵纣疳螨１２３ゥ桢狃茴鬻泔眄犷潲荑鹦趔芡狃篝稞茴鬻泔眄犷潲荑鹋眇茼狒梵纣屙痿茴鬻泔眄犷潲荑鹗镩铨荃痨躞茴鬻泔眄犷潲荑鹩轭琮鄄蓰郏荑鹦趔２蔟茴鬻泔眄犷潲荑鹋酏鄢蓰郏２荑鹦趔３蔟ゥ沩洄茴鬻泔眄犷潲茼狒汨鏖翳郾蓰茼狒梵纣磲翥椠１茼狒梵纣鏖翳茴鬻泔眄犷潲茔礓领祜泯郾蓰茼狒梵纣犰祜泯１茴鬻泔眄犷潲茔礓腻犰祜泯郾蓰茔礓溴犰祜泯１茴鬻泔眄犷潲茔礓义徜郾蓰茔礓蝈徜１茴鬻泔眄犷潲茔礓昨轸妪鄄蓰茔礓黩轸妪１２茴鬻泔眄犷潲茔礓田汶郾蓰茔礓祜汶茴鬻泔眄犷潲茔礓疹祜汶鄄蓰茔礓躅祜汶啕荇屮酐荑禧ぼ灬铉戾２茯犷珈澶茴鬻泔眄犷潲茔礓义酏郾蓰茔礓蝈酏１茴鬻泔眄犷潲茔礓渝颀鄢蓰１莒彐翎蝌秣２３茴鬻泔眄犷潲茔礓嗅螨鄄蓰１莛疳２茴鬻泔眄犷潲茔礓崎郾蓰茔礓骈１茴鬻泔眄犷潲茔礓娘郾蓰茔礓滹１ゥ篝狒茴鬻泔眄犷潲茕滹茔礓滹茴鬻泔眄犷潲茯蝈徜鄄蓰１莒彐翎蝌秣茔礓义徜２茴鬻泔眄犷潲荀黩轸妪鄄蓰１航２ゥ疳蜥祆屐轶茴鬻泔眄犷潲莒镢臊郾蓰茔礓祜汶１茴鬻泔眄犷潲荃铎镢臊郾蓰茔礓躅祜汶１茴鬻泔眄犷潲荃铎镢肓讫鄄蓰茔礓躅祜汶啕２１茴鬻泔眄犷潲莒镢胫狎茼狒梵纣祀茴鬻泔眄犷潲莒镢轴螨苠祆茴鬻泔眄犷潲茚麸黹泯鄄蓰莒犷珈１茯犷珈暹茚貘泔溴２茴鬻泔眄犷潲莛疳螨芑茳芑ロ弭狯狎茴鬻泔眄犷潲苕躅钺礤郾蓰茼狒梵纣１茴鬻泔眄犷潲苠痱妪茴鬻泔眄犷潲莒镢胩茆趑茼狒梵纣田汶潺茴鬻泔眄犷潲莒镢胝茆骀茔犷沐禧莒镢胩茴鬻泔眄犷潲莒镢胂黝茼狒梵纣削铨茴鬻泔眄犷潲莒镢胛秣铨茔犷沐燔祜汶削铨ボ铄縻镯磲钿莒镢胛秣铨茼狒梵纣蜗黝茴鬻泔眄犷潲莒沆茼狒梵纣育ヌ茴鬻泔眄犷潲苠铞茼狒梵纣淆ヅ茴鬻泔眄犷潲茯缬翦瘕郾蓰莒遽潴麸啕１茴鬻泔眄犷潲茯缬翦痼郾蓰莒遽潴麸蕺啕１茴鬻泔眄犷潲茯缬翦瘕郾蓰茯殓梏狎蝻鬟１茴鬻泔眄犷潲茯缬翦痼郾蓰茯殓梏狎蝻鬓啕１茴鬻泔眄犷潲莒沆郁屦茯缬翦瘥莒沆茴鬻泔眄犷潲莒沆郁屦簖茯缬翦痼莒沆茴鬻泔眄犷潲苠铞郁屦茯缬翦瘥苠铞茴鬻泔眄犷潲苠铞郁屦簖茯缬翦痼苠铞茴鬻泔眄犷潲茼佚郾蓰茼狒梵纣睚啕１茴鬻泔眄犷潲茼听茼佧莒沆茴鬻泔眄犷潲茼琵茼佧苠铞茴鬻泔眄犷潲茼育茼佧莒沆茴鬻泔眄犷潲茼淆茼佧苠铞茴鬻泔眄犷潲荇佚郾蓰茼狒梵纣酏啕１茴鬻泔眄犷潲荇听荇佧莒沆茴鬻泔眄犷潲荇琵荇佧苠铞茴鬻泔眄犷潲荇育荇佧莒沆茴鬻泔眄犷潲荇淆荇佧苠铞茴鬻泔眄犷潲茜茼狒梵纣琮茴鬻泔眄犷潲茜佚郾蓰茜啕１茴鬻泔眄犷潲茜听茜佧莒沆茴鬻泔眄犷潲茜琵茜佧苠铞茴鬻泔眄犷潲茜育茜佧莒沆茴鬻泔眄犷潲茜淆茜佧苠铞茴鬻泔眄犷潲茜瘕茜佧瘕茴鬻泔眄犷潲茜潺茜佧苣屐翎茴鬻泔眄犷潲茜犰忑茜佧荇屮酐犰忑茴鬻泔眄犷潲荀听鬟莒沆茴鬻泔眄犷潲荀琵鬟苠铞茴鬻泔眄犷潲茈听脒莒沆茴鬻泔眄犷潲茈琵脒苠铞茴鬻泔眄犷潲荑轭鳊柽轭鳊茴鬻泔眄犷潲荑椠茴鬻泔眄犷潲茼睚茴鬻泔眄犷潲苋轶酏郾蓰茼狒梵纣栝篝１茴鬻泔眄犷潲荑轶酏荇狨茴鬻泔眄犷潲荑轶籼荑轶暨莒沆茴鬻泔眄犷潲荑轶襞荑轶暨苠铞茴鬻泔眄犷潲荑轶粲荑轶籼茴鬻泔眄犷潲荑轶粝荑轶襞茴鬻泔眄犷潲荑轶翡荑轶暨苣屐翎茴鬻泔眄犷潲荑听柽莒沆茴鬻泔眄犷潲荑琵柽苠铞茴鬻泔眄犷潲荑育柽莒沆茴鬻泔眄犷潲荑淆柽苠铞茴鬻泔眄犷潲荏椠柽茼狒梵纣引ビ茴鬻泔眄犷潲茕听溥茼狒梵纣育茴鬻泔眄犷潲茕琵溥茼狒梵纣淆茴鬻泔眄犷潲苠听暹莒沆茴鬻泔眄犷潲苠琵暹苠铞茴鬻泔眄犷潲荛铞郾蓰绍１茴鬻泔眄犷潲苌铞茼狒栝酐深鳊茴鬻泔眄犷潲荛铞慢鄄蓰荛铞ǎ２ン疱泱茴鬻泔眄犷潲荏疱闼郾蓰苠铙躜屙狒棼荇屮翥镬矧忪蹂１茴鬻泔眄犷潲荏疱阊鄞蓰郏２３墁４ボ箴邈邀硖缣缗瘕茴鬻泔眄犷潲荏疱泯郾蓰荏疱闼莒彐糗１茯殓梏荦茴鬻泔眄犷潲茕蝮疱泯郾蓰荏疱闼莒犷珈妍１茯犷珈妪茴鬻泔眄犷潲荏箴邈郾蓰荏疱闼茺１荦茴鬻泔眄犷潲荏疱懔鄞蓰荏疱沱荏疱阊１２３４茴鬻泔眄犷潲荏疱阏鄢蓰荏疱阊莒镢胛秣铨１２３茴鬻泔眄犷潲荏疱阏屙瘕郾蓰荏疱阏１茕镱翥狎妪苠眇茯孱鬻泔眄犷潲荏疱阏屙瘕郾蓰茚貘箴趔汽１茴鬻泔眄犷潲荏疱闾鄢蓰荏疱阊莒镢胂黝１２３茴鬻泔眄犷潲荇躔戾骘躜鄞蓰ǎ爆２３４茴鬻泔眄犷潲荇躔戾骈鲥鄣蓰ǎ爆２３４５茴鬻泔眄犷潲莛蝻琮鄞蓰荏箴邈１墁２墁荏箴邈３利４ぼ磲翳箧痱镧１２３茴鬻泔眄犷潲莛蝻缭鄞蓰莛蝻琨１２３４ぼ磲翳箧痱镧１２３茴鬻泔眄犷潲莛蝻缒骒酏鄯蓰莛蝻琨荏疱阊１２３５６荏疱阊１２荛翦１莒镢胂黝３４７ボ痱镧逆祠睚猃恺瘕笼颀ン翦痧轭茴鬻泔眄犷潲茚篝屦鄞蓰１２芤殓梏狎蝻３４メ泗轱詈茚篝屦椠猃瑙雩茴鬻泔眄犷潲荇篝屦鄞蓰１２芤殓梏狎蝻３４ヴ蝈搴荇篝屦椠瘕瑙皈茴鬻泔眄犷潲莒篝屦鄯蓰１茼殇２３４荏翎汶蝈禧莒沆芤殓梏狎蝻鼾５６７レ镢犰莒篝屦ㄨ礴农箬桧缣鹛箬桧缣鹛茴鬻泔眄犷潲苠篝屦鄱蓰１２茼殇３４荏翎汶蝈禧苠铞芤殓梏狎蝻鼾５６ュ铞苠篝屦桧听鹛箬桧缗箬桧缗ゥ疸茴鬻泔眄犷潲荏翥镱泯鄞蓰莛蝻琨１２３４茴鬻泔眄犷潲荏翥镱阍鄣蓰荏翥镱沱１２３４５茴鬻泔眄犷潲莛沩育茼狒桠恹正茴鬻泔眄犷潲莛沩讫茆蹯戾酏茴鬻泔眄犷潲荜镩铨莛沩讫ボ铄縻镯磲钿荜觑轭郾蓰苠铙躜屙狒棼莛沩讫啕１茴鬻泔眄犷潲荜觑轭郾蓰苠铙躜屙狒棼茆殓镤雉啕１奖揞茴鬻泔眄犷潲莛沩正茼狒桠忭饼茴鬻泔眄犷潲苕箴邈郾蓰１摞荏栳蝠ゥ黹筱茴鬻泔眄犷潲莒翎泯挑徙茴鬻泔眄犷潲茱痿轱铨郾蓰茔礓镳糸镱１茴鬻泔眄犷潲芪镱妪茼狒梵纣物铄茴鬻泔眄犷潲苡镯妪郾蓰茼狒梵纣语礤１茴鬻泔眄犷潲芤羼鄄蓰茼狒梵纣义颀１２茴鬻泔眄犷潲芤弩瘕郾蓰茼狒梵纣义箴１茴鬻泔眄犷潲苣镱妪茼狒梵纣深轸茴鬻泔眄犷潲莒镬扉茼蹯糸磲瘕茴鬻泔眄犷潲苕灬趑孱郾蓰莒骒镲１茯骒镲螨茴鬻泔眄犷潲苕骒狒翦铨郾蓰莒戽祜矧１茯蜴祜矧茴鬻泔眄犷潲茼跆茼踹莒沆茴鬻泔眄犷潲茼跖茼踹苠铞茴鬻泔眄犷潲茚听荏殓磲哕煦忑茴鬻泔眄犷潲茚琵荏殓磲哕孱鳊茴鬻泔眄犷潲茚貘泔溴郾蓰荇屮酐荑禧ぃ堡茴鬻泔眄犷潲茚貘泔溴讫郾蓰茚貘泔溴莒犷珈１茯犷珈妪茴鬻泔眄犷潲茚貘祁苄栝ボ铄縻镯磲钿苊犹糜誊箴徙妪茴鬻泔眄犷潲苡糜听用犹茗箴徙妪茴鬻泔眄犷潲苕泱忑ぼ翦趄睇泼犹ぼ箴徙妪チ陀孱鲩蝻铐孱趔荇桢矧屙篝戾蝈磲螂茴鬻翳屣蝈睇屮犴痨妪砒犴痨妪垠邈糸镱荇桢矧屙篝戾溴骈铋糸镱茴鬻翳屣蝈睇溴骈铋糸镱腻骈铋糸镱垠邈糸镱ボ翳屣蝈眢豉戾痨衢铨茴鬻翳屣蝈睇翳屣蝈睚澡屣蝈睚垠邈糸镱茴鬻翳屣蝈睇戾眄猃埕桢矧屙蓰体眄猃茴鬻翳屣蝈睇痱镳矬轸轱铨埕桢矧屙蓰序镳矬轸轱铨茴鬻翳屣蝈睇泔蝻祆狎埕桢矧屙蓰蔑蝻祆狎茴鬻孱鲩蝻铐孱酐痱镲骟脲翥椠荇蜷鲮轶糗轸屙圯苠眇棼序镲箅弭汨糊荃铙腴疖铒怛遽胲梵腴卞痨躞辨殪茴镡蝈犭ぼ篑踽蝈莛狎骈祆箅轲桨痿苠钿趄轹扉篝荇桢矧屙篝戾痨衢铨茴鬻泔眄犷潲芷篝莛檫饼茴鬻泔眄犷潲苡钿莛檫昌茴鬻泔眄犷潲莛蝈荏耋踱箦翦颀茴鬻泔眄犷潲莒狍酏郾蓰茼狒梵纣灬篝１茴鬻泔眄犷潲苕篝郾蓰芷篝ǎ暴茴鬻泔眄犷潲荏钿郾蓰苡钿ǎ暴茴鬻泔眄犷潲荛铊鄄蓰１荇屮酐轶轭２茴鬻泔眄犷潲荛钺酏鄢蓰２埯３１茴鬻泔眄犷潲荛轭狒鄢蓰荛钺酐１ǎ博３茴鬻泔眄犷潲荇犷辇鄢蓰２埯３１茴鬻泔眄犷潲荇翎铋鄢蓰荇犷辂１ǎ博３茴鬻泔眄犷潲苠翥苠眇棼弭泯茴鬻泔眄犷潲荛妪苠眇棼楫瀹茗箴徙妪茴鬻泔眄犷潲苌妪苠眇棼僧瀹茗箴徙妪茴鬻泔眄犷潲苠琮苠眇棼瀹绠茗箴徙妪茴鬻泔眄犷潲芘琮苠眇棼女绠茗箴徙妪茴鬻泔眄犷潲荟簖苠眇棼鲶茗箴徙妪茴鬻泔眄犷潲苠翎忑苠眇棼弭犰茗箴徙妪茴鬻泔眄犷潲茚滂镢苠眇棼徜栾泯茗箴徙妪茴鬻泔眄犷潲荟辁苠眇棼鲩茗箴徙妪茴鬻泔眄犷潲茕镯郾蓰茼狒梵纣滹睚ǎ暴茴鬻泔眄犷潲茚脶荇屮糸酐岙氘岙茗箴徙妪茴鬻泔眄犷潲茔纨荇屮糸酐沔茗箴徙妪茴鬻泔眄犷潲荀螋苠眇棼黩舢茗箴徙妪茴鬻泔眄犷潲荏趄蹉趱蝈郾蓰荃钿弪扉铄茼狒梵纣篝蝓泗躜妪茼狒梵纣１茴鬻泔眄犷潲茔犷镱殂犰郾蓰荃钿弪扉铄茼狒梵纣汜铒铋汜忑茼狒梵纣１茴鬻泔眄犷潲苕殓箝妪苕镲纛雉弩辁妪茴鬻泔眄犷潲茴屮羝铨苄栝茼狒梵纣铄酏茴鬻泔眄犷潲荛铘弪驷沐茼狒梵纣轭翦蜴徙妪茴鬻泔眄犷潲茼镤蹯妪茼狒梵纣盹漉戾茴鬻泔眄犷潲苄狒椠莛辇茴鬻泔眄犷潲苄狒梵茭弭猃茴鬻泔眄犷潲茯弩蹯酏茼狒梵纣蝈簖茴鬻泔眄犷潲荏翎翦鄢蓰埯１２３蔟茴鬻泔眄犷潲苡翎翦鄢蓰埯１２３蔟茴鬻泔眄犷潲茚戽祜汜狨殪獒蝙骢钽糸镱茗箴徙妪茴鬻泔眄犷潲茚戽簖祜汜狨殪獒蝙骢钽糸镱筌箴徙妪茴鬻泔眄犷潲茼镤屐笥听茼镤屐筮茼狒梵纣犹茴鬻泔眄犷潲荟溽箬瞄谬荟溽箬啕茼狒梵纣瞄谬茴鬻泔眄犷潲荑瘕茼狒梵纣桊茴鬻泔眄犷潲荀蜢潺茼狒梵纣麂茴鬻泔眄犷潲荏屦荇屮翎篝弪轶脬孱翦蝈潺ボ铄縻镯磲钿荏屐纨茼狒栝酐箦戽ボ铄縻镯磲钿茱翳弪茼狒栝酐雉桢螨ボ铄縻镯磲钿荜镩铘茼狒栝酐觑轭酏茴鬻泔眄犷潲茯弩茯弩蹯酏蚤汶弭邃祜汶篝蹑茴鬻泔眄犷潲荏弭郾蓰茺１荦茴鬻泔眄犷潲茼箦酏郾蓰茺堋茺１荦堋荦茴鬻泔眄犷潲苡弭郾蓰莒彐糗１茯殓梏荦茴鬻泔眄犷潲荇忑茼狒栝酐綮茴鬻泔眄犷潲苕簖茼狒梵纣纨啕茼狒梵纣育茴鬻泔眄犷潲苕稞茼狒梵纣纨啕茼狒梵纣淆茴鬻泔眄犷潲茜簖茼狒梵纣琮啕茼狒梵纣育茴鬻泔眄犷潲茜稞茼狒梵纣琮啕茼狒梵纣淆茴鬻泔眄犷潲茼螨茼狒梵纣睚啕茼狒梵纣引茴鬻泔眄犷潲荑螨柽茼狒梵纣引茴鬻泔眄犷潲荑簖柽茼狒梵纣育茴鬻泔眄犷潲荑稞柽茼狒梵纣淆ボ铄縻镯磲钿莛蜷鳊茼狒梵纣痱轹ボ铄縻镯磲钿茔镨茼狒梵纣泔椠茴鬻泔眄犷潲荟妖茼狒梵纣鲠扉溲蹂蹂茴鬻泔眄犷潲荟犰殇茼狒梵纣鲠扉潺茴鬻泔眄犷潲苠轸桢螨茼狒梵纣彘翳弪茴鬻泔眄犷潲荛潇妪茼狒梵纣殇戾茴鬻泔眄犷潲茉蝓妪茼狒梵纣趄蹂茴鬻泔眄犷潲芷犰箦茼狒梵纣驷祗妪茴鬻泔眄犷潲荇蜥铙轸茼狒梵纣趄犷箝酏茴鬻泔眄犷潲荛铘弪钺忑茼狒梵纣轭翦蝾犰茴鬻泔眄犷潲茚泷蹰蝈茼狒梵纣徙聃轵妪茴鬻泔眄犷潲茯屐遽箦茼狒梵纣蝈戾狍妪茴鬻泔眄犷潲荏徭妪茼狒梵纣筢驽茴鬻泔眄犷潲荏翦瘕茼狒梵纣篝屦茴鬻泔眄犷潲荛钽蝾酏茼狒梵纣晌靡呜札茴鬻泔眄犷潲荛钽蝻黝茼狒梵纣晌靡献锡茴鬻泔眄犷潲荇蝙铨茼狒梵纣砸冽嘛弩茕彐轭邈镬矧箬徜邈镬矧珧狴碑鞍茕彐轭邈镬矧滗狎腌蜥珧狴爱返茕彐轭邈镬矧溽螂珧狴珧狴爱嘲茕彐轭邈镬矧扉玷舡珧狴珧狴爱傅茴鬻泔眄犷潲荀栝翦怙郾蓰茔镬矧怙麒轸妪１茴鬻泔眄犷潲茜蜥怙郾蓰茔镬矧怙扉玷舡珧狴１茴鬻泔眄犷潲茕狎腌蜥怙郾蓰茔镬矧怙滗狎腌蜥１茴鬻泔眄犷潲茜忭郾蓰茜蜥怙１篝屦痖铉蝈灬糸镱メ泗轱詈茚篝屦椠猃瑙雩茴鬻泔眄犷潲茚篝屦簖莒遽潴麸啕茼狒梵纣猃ヴ蝈搴荇篝屦椠瘕瑙皈茴鬻泔眄犷潲荇篝屦簖郾蓰茗议玷翎蝌秣１啕茼狒梵纣酏
% \newcommand{\tsteps}[1]{\stackrel{#1}{\leadsto}_{\mathsf{t}}}
\newcommand{\etsteps}[1]{\stackrel{#1}{\leadsto}_{\flatten{\mathsf{t}}}}
%tree: \tstep{h}{p} {h'}{p'}
\newcommand{\osteps}{\leadsto_{\mathsf{R}}^*}
%tree: \tstep{h}{p} {h'}{p'}
\newcommand{\ssteps}[1]{\stackrel{#1}{\leadsto}_{\mathsf{G}}}

% \newcommand{\rely}{{\mathsf{R}}}
% \newcommand{\guar}{{\mathsf{G}}}

\newcommand{\rely}[1]{\mathcal{R}_{#1}}
\newcommand{\guar}[1]{\mathcal{G}_{#1}}

% Schedules
\newcommand{\ChoiceAct}{\mathsf{ChoiceAct}}
\newcommand{\SeqRet}{\mathsf{SeqRet}}
\newcommand{\SeqStep}{\mathsf{SeqStep}}
\newcommand{\ParRet}{\mathsf{ParRet}}
\newcommand{\ParL}{\mathsf{ParL}}
\newcommand{\ParR}{\mathsf{ParR}}
\newcommand{\HideStep}{\mathsf{HideStep}}
\newcommand{\HideRet}{\mathsf{HideRet}}
\newcommand{\InjRet}{\mathsf{InjRet}}
\newcommand{\InjStep}{\mathsf{InjStep}}
\newcommand{\Ghi}{\widehat{\Phi}}
\newcommand{\lp}{\mathit{lp}}

\newcommand{\coh}[1]{{\cal W}_{#1}}
\newcommand{\prop}{\mathsf{prop}}
\newcommand{\flv}{\mathsf{FLV}}

\makeatletter
\newcommand*{\textalltt}{}
\DeclareRobustCommand*{\textalltt}{%
  \begingroup
    \let\do\@makeother
    \dospecials
    \catcode`\\=\z@
    \catcode`\{=\@ne
    \catcode`\}=\tw@
    \verbatim@font\@noligs
    \@vobeyspaces
    \frenchspacing
    \@textalltt
}
\newcommand*{\@textalltt}[1]{%
    #1%
  \endgroup
}
\makeatother

\newcommand{\code}[1]{\texttt{\small{#1}}}
\newcommand{\tid}{\mathit{tid}}
